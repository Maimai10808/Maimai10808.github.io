<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Escaping vs Non-Escaping Closures in Swift | VermeerByte's Blog</title><meta name="author" content="VermeerByte"><meta name="copyright" content="VermeerByte"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Ⅰ.What is an Escaping Closure?Definition:An escaping closure is a closure that is passed into a function as a parameter, but may be called after the function has already returned.In other words, the c">
<meta property="og:type" content="article">
<meta property="og:title" content="Escaping vs Non-Escaping Closures in Swift">
<meta property="og:url" content="https://maimai10808.github.io/2025/07/20/Understanding%20%20Escaping%20Closures%20in%20Swift/index.html">
<meta property="og:site_name" content="VermeerByte&#39;s Blog">
<meta property="og:description" content="Ⅰ.What is an Escaping Closure?Definition:An escaping closure is a closure that is passed into a function as a parameter, but may be called after the function has already returned.In other words, the c">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://maimai10808.github.io/images/swift.svg">
<meta property="article:published_time" content="2025-07-19T16:00:00.000Z">
<meta property="article:modified_time" content="2025-07-17T18:53:57.725Z">
<meta property="article:author" content="VermeerByte">
<meta property="article:tag" content="Functional Programming">
<meta property="article:tag" content="Closures">
<meta property="article:tag" content="Advanced Swift Syntax">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://maimai10808.github.io/images/swift.svg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Escaping vs Non-Escaping Closures in Swift",
  "url": "https://maimai10808.github.io/2025/07/20/Understanding%20%20Escaping%20Closures%20in%20Swift/",
  "image": "https://maimai10808.github.io/images/swift.svg",
  "datePublished": "2025-07-19T16:00:00.000Z",
  "dateModified": "2025-07-17T18:53:57.725Z",
  "author": [
    {
      "@type": "Person",
      "name": "VermeerByte",
      "url": "https://maimai10808.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/logo.png"><link rel="canonical" href="https://maimai10808.github.io/2025/07/20/Understanding%20%20Escaping%20Closures%20in%20Swift/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Escaping vs Non-Escaping Closures in Swift',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/images/imagelogo1.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/images/swift.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/images/logo.png" alt="Logo"><span class="site-name">VermeerByte's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Escaping vs Non-Escaping Closures in Swift</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Escaping vs Non-Escaping Closures in Swift</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-07-19T16:00:00.000Z" title="Created 2025-07-20 00:00:00">2025-07-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-07-17T18:53:57.725Z" title="Updated 2025-07-18 02:53:57">2025-07-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Swift-Deep-Dives/">Swift Deep Dives</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Ⅰ-What-is-an-Escaping-Closure"><a href="#Ⅰ-What-is-an-Escaping-Closure" class="headerlink" title="Ⅰ.What is an Escaping Closure?"></a>Ⅰ.What is an Escaping Closure?</h1><h2 id="Definition"><a href="#Definition" class="headerlink" title="Definition:"></a>Definition:</h2><p>An escaping closure is a closure that is passed into a function as a parameter, but may be called after the function has already returned.<br>In other words, the closure “escapes” the function’s scope.</p>
<p>When declaring a function that takes a closure parameter, you use the @escaping keyword to indicate that the closure is allowed to escape the function body.</p>
<p>This means the closure “escapes” the function’s body.</p>
<h1 id="Ⅱ-Why-Do-We-Need-Escaping-Closures-Example-Networking"><a href="#Ⅱ-Why-Do-We-Need-Escaping-Closures-Example-Networking" class="headerlink" title="Ⅱ. Why Do We Need Escaping Closures? (Example: Networking)"></a>Ⅱ. Why Do We Need Escaping Closures? (Example: Networking)</h1><p>Imagine a function like this:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">fetchData</span>() -&gt; <span class="type">String</span>? &#123;</span><br><span class="line">    <span class="type">URLSession</span>.shared.dataTask(with: url) &#123; data, response, error <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Data received!&quot;</span>  <span class="comment">// ❌ ERROR</span></span><br><span class="line">    &#125;.resume()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>A closure that is called when a network request completes is escaping — the request is sent, time passes, and the closure is only executed when the response comes back, outside the original function scope.</p>
<p>This won’t work because:</p>
<ul>
<li>return here is trying to return from the closure, not the outer fetchData().</li>
<li>The function finishes before the network call completes.</li>
</ul>
<h3 id="When-you-call-fetchData"><a href="#When-you-call-fetchData" class="headerlink" title="When you call fetchData:"></a>When you call fetchData:</h3><ul>
<li>You immediately execute .resume(), and the request is sent out right away ✅</li>
<li>But the completion closure doesn’t run immediately — it will only execute after the server responds, which could take a few hundred milliseconds or even several seconds ❗️</li>
</ul>
<p>The <strong>request</strong> is indeed sent out immediately, but the closure you pass in is meant to handle what happens after the result comes back — and that result doesn’t arrive right away.</p>
<p> So we need a way to <strong>handle results later</strong> — that’s what escaping closures are for.</p>
<h1 id="Ⅲ-What-Does-escaping-Do"><a href="#Ⅲ-What-Does-escaping-Do" class="headerlink" title="Ⅲ. What Does @escaping Do?"></a>Ⅲ. What Does @escaping Do?</h1><h3 id="By-default-Swift-closures-passed-as-parameters-are-non-escaping-meaning"><a href="#By-default-Swift-closures-passed-as-parameters-are-non-escaping-meaning" class="headerlink" title="By default, Swift closures passed as parameters are non-escaping, meaning:"></a>By default, Swift closures passed as parameters are non-escaping, meaning:</h3><ul>
<li>The closure must be executed within the function’s body</li>
<li>It can be stored on the stack, which is safer and more performant</li>
</ul>
<h3 id="But-for-asynchronous-operations-like-network-requests"><a href="#But-for-asynchronous-operations-like-network-requests" class="headerlink" title="But for asynchronous operations, like network requests:"></a>But for <strong>asynchronous</strong> operations, like network requests:</h3><ul>
<li>The closure must <strong>outlive</strong> the function → that’s when you use @escaping</li>
<li>Swift stores it on the heap to execute later</li>
</ul>
<p>The network request is sent immediately, but the closure that handles the response is executed at a later time — that’s why it must be marked as an escaping closure (@escaping).</p>
<h1 id="Ⅳ-Correct-Way-Using-an-Escaping-Closure"><a href="#Ⅳ-Correct-Way-Using-an-Escaping-Closure" class="headerlink" title="Ⅳ.Correct Way Using an Escaping Closure"></a>Ⅳ.Correct Way Using an Escaping Closure</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">fetchData</span>(<span class="params">completion</span>: <span class="keyword">@escaping</span> (<span class="type">String</span>?) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">URL</span>(string: <span class="string">&quot;https://example.com&quot;</span>)<span class="operator">!</span></span><br><span class="line">    <span class="type">URLSession</span>.shared.dataTask(with: url) &#123; data, <span class="keyword">_</span>, <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> data <span class="operator">=</span> data &#123;</span><br><span class="line">            <span class="keyword">let</span> str <span class="operator">=</span> <span class="type">String</span>(data: data, encoding: .utf8)</span><br><span class="line">            completion(str)  </span><br><span class="line"><span class="comment">// ✅ returning data asynchronously</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            completion(<span class="literal">nil</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.resume()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Usage (with trailing closure syntax):</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetchData &#123; result <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> result <span class="operator">=</span> result &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Got response: <span class="subst">\(result)</span>&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Failed to get response.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Why-is-escaping-Required"><a href="#Why-is-escaping-Required" class="headerlink" title="Why is @escaping Required?"></a>Why is @escaping Required?</h2><p>Because the completion closure is called after <em>fetchData()</em> has already returned, it “escapes” the function’s local scope.</p>
<p>Swift requires @escaping in such cases to make the closure’s lifetime explicit.</p>
<h1 id="Ⅴ-Non-Escaping-Closures"><a href="#Ⅴ-Non-Escaping-Closures" class="headerlink" title="Ⅴ.Non-Escaping Closures"></a>Ⅴ.Non-Escaping Closures</h1><h2 id="Concept"><a href="#Concept" class="headerlink" title="Concept:"></a>Concept:</h2><p>A non-escaping closure is a closure passed into a function and executed within the function before it returns.</p>
<h2 id="Example-Using-a-Non-Escaping-Closure-to-Process-Local-Data"><a href="#Example-Using-a-Non-Escaping-Closure-to-Process-Local-Data" class="headerlink" title="Example: Using a Non-Escaping Closure to Process Local Data"></a>Example: Using a Non-Escaping Closure to Process Local Data</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DataManager</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">processData</span>(<span class="params">closure</span>: (<span class="type">String</span>) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Start processing data&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> result <span class="operator">=</span> <span class="string">&quot;Local data processed&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Execute the closure immediately (non-escaping)</span></span><br><span class="line">        closure(result)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;End processing data&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_ inherited__">UIViewController</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> manager <span class="operator">=</span> <span class="type">DataManager</span>()</span><br><span class="line">        </span><br><span class="line">        manager.processData &#123; result <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Closure executed with result: <span class="subst">\(result)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>Console Output:</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Start</span> processing data  </span><br><span class="line"><span class="type">Closure</span> executed with result: <span class="type">Local</span> data processed  </span><br><span class="line"><span class="type">End</span> processing data</span><br></pre></td></tr></table></figure>

<h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation:"></a>Explanation:</h2><ul>
<li>The method processData takes a closure of type (String) -&gt; Void.</li>
<li>The closure is executed immediately <strong>inside the function body</strong>.</li>
<li>Since the closure <strong>does not escape the function scope</strong>, it does not require the @escaping keyword.</li>
<li>The compiler can safely assume that the closure’s lifetime ends within the function, so it’s fully safe and optimized.</li>
</ul>
<h1 id="Ⅵ-Escaping-Closure-VS-Non-Escaping-Closures"><a href="#Ⅵ-Escaping-Closure-VS-Non-Escaping-Closures" class="headerlink" title="Ⅵ.Escaping Closure VS Non-Escaping Closures"></a>Ⅵ.Escaping Closure VS Non-Escaping Closures</h1><p>Let review another example :</p>
<p>Code Example: Escaping Closure:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_ inherited__">UIViewController</span> &#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        getData &#123; (data) <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Closure returned -- <span class="subst">\(data)</span> -- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">getData</span>(<span class="params">closure</span>: <span class="keyword">@escaping</span> (<span class="keyword">Any</span>) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Function started -- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">        <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">            <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Executing closure --- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">                closure(<span class="string">&quot;345&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Function ended --- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Execution-Output"><a href="#Execution-Output" class="headerlink" title="Execution Output:"></a>Execution Output:</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Function</span> started <span class="operator">--</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br><span class="line"><span class="type">Function</span> ended <span class="operator">---</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br><span class="line"><span class="type">Executing</span> closure <span class="operator">---</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br><span class="line"><span class="type">Closure</span> returned <span class="operator">--</span> <span class="number">345</span> <span class="operator">--</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br></pre></td></tr></table></figure>

<p>Code Example: Non-Escaping Closure:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_ inherited__">UIViewController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        handleData &#123; (data) <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Closure returned -- <span class="subst">\(data)</span> -- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">handleData</span>(<span class="params">closure</span>: (<span class="keyword">Any</span>) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Function started -- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Executing closure --- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">        closure(<span class="string">&quot;4456&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Function ended --- <span class="subst">\(Thread.current)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Execution-Output-1"><a href="#Execution-Output-1" class="headerlink" title="Execution Output:"></a>Execution Output:</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Function</span> started <span class="operator">--</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br><span class="line"><span class="type">Executing</span> closure <span class="operator">---</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br><span class="line"><span class="type">Closure</span> returned <span class="operator">--</span> <span class="number">4456</span> <span class="operator">--</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br><span class="line"><span class="type">Function</span> ended <span class="operator">---</span> <span class="operator">&lt;</span><span class="type">NSThread</span>: <span class="operator">...&gt;</span>&#123;number <span class="operator">=</span> <span class="number">1</span>, name <span class="operator">=</span> main&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>Feature</th>
<th>Example 1 (Escaping)</th>
<th>Example 2 (Non-Escaping)</th>
</tr>
</thead>
<tbody><tr>
<td>Closure keyword.</td>
<td>@escaping</td>
<td>No @escaping</td>
</tr>
<tr>
<td>Execution timing</td>
<td>Delayed, after the function returns</td>
<td>immediately within the function</td>
</tr>
<tr>
<td>Async or delayed?</td>
<td>✅ Yes</td>
<td>❌ No</td>
</tr>
<tr>
<td>Escapes function scope?</td>
<td>✅ Yes</td>
<td>❌ No</td>
</tr>
<tr>
<td>Compiler requires escaping</td>
<td>✅ Yes</td>
<td>❌ No</td>
</tr>
<tr>
<td>Output sequence</td>
<td><strong>Start → End → Closure</strong></td>
<td><strong>Start → Closure → End.</strong></td>
</tr>
</tbody></table>
<h1 id="Ⅶ-Limitations-of-Escaping-Closures"><a href="#Ⅶ-Limitations-of-Escaping-Closures" class="headerlink" title="Ⅶ.Limitations of Escaping Closures"></a>Ⅶ.Limitations of Escaping Closures</h1><p>While escaping closures are powerful and necessary for handling asynchronous operations, they come with certain risks — particularly around memory management.</p>
<h3 id="Risk-of-Retain-Cycles"><a href="#Risk-of-Retain-Cycles" class="headerlink" title="Risk of Retain Cycles"></a>Risk of Retain Cycles</h3><p>One of the most important caveats when using @escaping closures is the potential for <strong>retain cycles</strong>. Since escaping closures are stored and executed later, they can strongly capture self, preventing it from being deallocated.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DataLoader</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> completionHandler: (() -&gt; <span class="type">Void</span>)<span class="operator">?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">loadData</span>(<span class="params">completion</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.completionHandler <span class="operator">=</span> completion  <span class="comment">// 💥 Potential retain cycle if [weak self] is not used</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the above example, self retains completionHandler, and if the closure also captures self, a retain cycle occurs — meaning both self and the closure will never be released from memory.</p>
<h3 id="Best-Practice"><a href="#Best-Practice" class="headerlink" title="Best Practice:"></a>Best Practice:</h3><p><strong>Be careful:</strong> Escaping closures can capture self strongly, which may lead to retain cycles.<br>To avoid memory leaks, use <strong>[weak self]</strong> or <strong>[unowned self]</strong> when referencing self inside escaping closures.</p>
<h3 id="Safer-Example"><a href="#Safer-Example" class="headerlink" title="Safer Example:"></a>Safer Example:</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">loadData</span>(<span class="params">completion</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.completionHandler <span class="operator">=</span> &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// Use self? safely</span></span><br><span class="line">        <span class="keyword">self</span><span class="operator">?</span>.doSomething()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This approach prevents memory from being held unnecessarily, and ensures a safe, leak-free implementation.</p>
<h1 id="Ⅸ-Summary"><a href="#Ⅸ-Summary" class="headerlink" title="Ⅸ.Summary"></a>Ⅸ.Summary</h1><p>We can think of a running program as a car cruising on a highway.</p>
<p>When everything is <strong>synchronous</strong>—no network requests, no delayed tasks—it’s like driving straight down a clear, straight road. You don’t have to steer much or worry about detours; everything proceeds predictably and smoothly.</p>
<p>However, the moment you introduce <strong>asynchronous</strong> operations—like network calls, timers, or background processing—things change. It’s as if the road starts to curve. Now, you have to turn the wheel, adjust your path, and sometimes even wait at intersections for responses before moving forward.</p>
<p>In this scenario, the closures you pass into functions can no longer be executed immediately. They “escape” the straight road of the function and are triggered later, when the response arrives. These closures must be marked with @escaping to let the Swift compiler know:</p>
<p><em>“This closure won’t finish instantly—it will leave the function and come back later. Keep it safe until then.”</em></p>
<p>So at its core, the purpose of @escaping is:</p>
<p><strong>To allow delayed tasks the space and permission to live beyond the function’s lifetime, so they can be safely executed when the time is right.</strong></p>
<h1 id="Ⅹ-References"><a href="#Ⅹ-References" class="headerlink" title="Ⅹ.References"></a>Ⅹ.References</h1><hr>
<ol>
<li>Apple Developer Documentation. <a target="_blank" rel="noopener" href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/closures/"><em>Closures</em> – The Swift Programming Language (Swift 5.9)</a></li>
<li>Apple Developer. <a target="_blank" rel="noopener" href="https://developer.apple.com/tutorials/swiftui/handling-user-input"><em>SwiftUI Essentials – Handling User Input with Closures</em></a></li>
<li>Swift.org. <a target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0279-multiple-trailing-closures.md"><em>Swift Evolution Proposal SE-0279: Multiple Trailing Closures</em></a></li>
<li>Hacking with Swift. <a target="_blank" rel="noopener" href="https://www.hackingwithswift.com/quick-start/beginners/what-is-a-trailing-closure"><em>What is a trailing closure in Swift?</em></a></li>
<li>Swift中的逃逸闭包(@escaping )与非逃逸闭包(@noescaping)<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903951519727629">Swift中的逃逸闭包(@escaping )与非逃逸闭包(@noescaping)</a></li>
</ol>
<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://maimai10808.github.io">VermeerByte</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://maimai10808.github.io/2025/07/20/Understanding%20%20Escaping%20Closures%20in%20Swift/">https://maimai10808.github.io/2025/07/20/Understanding%20%20Escaping%20Closures%20in%20Swift/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Functional-Programming/">Functional Programming</a><a class="post-meta__tags" href="/tags/Closures/">Closures</a><a class="post-meta__tags" href="/tags/Advanced-Swift-Syntax/">Advanced Swift Syntax</a></div><div class="post-share"><div class="social-share" data-image="/images/swift.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/07/20/Understanding%20Typealias%20in%20Swift/" title="Understanding Typealias in Swift"><img class="cover" src="/images/swift.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Understanding Typealias in Swift</div></div><div class="info-2"><div class="info-item-1">Ⅰ.IntroductionHave you ever encountered a situation where your function’s parameters — especially closure parameters — become overwhelmingly long and cluttered? For example: 123func handle(success: ((Int) -&gt; Int)?,            failure: ((Error) -&gt; Void)?,            progress: ((Double) -&gt; Void)?) &#123; &#125; We can use typealias to helps you simplify complex types. Like this: 12345typealias Success = (Int) -&gt; Inttypealias Failure = (Error) -&gt; Voidtypealias Progress = (Double) ...</div></div></div></a><a class="pagination-related" href="/2025/07/19/Understanding%20()%20-%3E%20Void%20%20in%20Swift/" title="Understanding () -&gt; Void  in Swift"><img class="cover" src="/images/swift.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Understanding () -> Void  in Swift</div></div><div class="info-2"><div class="info-item-1">Ⅰ.What is () -&gt; Void in Swift?It represents a closure that takes no parameters and returns no value.Let’s break it down:    Part Meaning    () No input parameters   -&gt; Indicates a return type   Void No return value (Void means nothing)   Ⅱ.In plain language:() -&gt; Void means: “A block of code that takes nothing in, returns nothing out — it just runs.” Example:12345let sayHello: () -&gt; Void = &#123;    print(&quot;Hello!&quot;)&#125;sayHello()  // Output: Hello!  This sayHello is a c...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/07/17/Swift%20Closures/" title="Swift Closures"><img class="cover" src="/images/swift.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-17</div><div class="info-item-2">Swift Closures</div></div><div class="info-2"><div class="info-item-1">Swift ClosuresI. DefinitionClosures in Swift are defined as self-contained blocks of executable code that can capture variables or constants from their context. This means they can “remember” the environment in which they were created, even after that environment no longer exists. A common way to think of closures is as “nameless functions“though this is a simplification. II. FormsIn Swift, functions are technically a form of closure, leading to the following insights: All functions are closu...</div></div></div></a><a class="pagination-related" href="/2025/07/18/Trailing%20Closures%20in%20Swift/" title="Trailing Closures in Swift"><img class="cover" src="/images/swift.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-18</div><div class="info-item-2">Trailing Closures in Swift</div></div><div class="info-2"><div class="info-item-1">Trailing Closures in SwiftⅠ.IntroductionTrailing closures are one of Swift’s most distinctive and frequently used features, especially in asynchronous callbacks, animations, and data processing.  Let’s dive deep into this essential concept. Ⅱ.What is a Trailing Closure?A Trailing Closure is a special syntax in Swift where,if the final parameter of a function is a closure, you can write that closure outside the parentheses of the function call. This makes your code cleaner and more readable. A...</div></div></div></a><a class="pagination-related" href="/2025/07/19/Understanding%20()%20-%3E%20Void%20%20in%20Swift/" title="Understanding () -&gt; Void  in Swift"><img class="cover" src="/images/swift.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-19</div><div class="info-item-2">Understanding () -&gt; Void  in Swift</div></div><div class="info-2"><div class="info-item-1">Ⅰ.What is () -&gt; Void in Swift?It represents a closure that takes no parameters and returns no value.Let’s break it down:    Part Meaning    () No input parameters   -&gt; Indicates a return type   Void No return value (Void means nothing)   Ⅱ.In plain language:() -&gt; Void means: “A block of code that takes nothing in, returns nothing out — it just runs.” Example:12345let sayHello: () -&gt; Void = &#123;    print(&quot;Hello!&quot;)&#125;sayHello()  // Output: Hello!  This sayHello is a c...</div></div></div></a><a class="pagination-related" href="/2025/07/21/When%20and%20Why%20to%20Use%20@escaping%20in%20Swift%20A%20Practical%20Guide/" title="When and Why to Use @escaping in Swift - A Practical Guide"><img class="cover" src="/images/swift.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-21</div><div class="info-item-2">When and Why to Use @escaping in Swift - A Practical Guide</div></div><div class="info-2"><div class="info-item-1">Ⅰ.IntroductionIn my last article, Escaping vs Non-Escaping Closures in Swift, we discussed the difference between escaping and non-escaping closures in Swift. Today, we’ll take a deeper look at escaping closures through real-world examples. Core Concept Sentence：A non-escaping closure executes during the function execution, while an escaping closure executes after the function has returned. Ⅱ.Non-Escaping ClosuresLifecycle The closure is passed as a parameter to a function The closure is exec...</div></div></div></a><a class="pagination-related" href="/2025/07/25/From%20Long%20Functions%20to%20Modular%20Code%20Refactoring%20the%20User%20Account/" title="From Long Functions to Modular Code - Refactoring the User Account Creation Flow"><img class="cover" src="/images/swift.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-25</div><div class="info-item-2">From Long Functions to Modular Code - Refactoring the User Account Creation Flow</div></div><div class="info-2"><div class="info-item-1">Ⅰ.IntroductionIn my recent iOS project ChatApp , I refactored the account creation functionality. The original code was overly long and lacked modularity, making it difficult to maintain and extend.  By refactoring the code, I improved its readability, maintainability, and reduced potential memory leak risks. In this blog, I will share a comparison of the code before and after the refactor, as well as the advantages of the refactor and the lessons learned. Here is the whole code before the re...</div></div></div></a><a class="pagination-related" href="/2025/07/17/Functions%20as%20First-Class%20Citizens/" title="Functions as First-Class Citizens"><img class="cover" src="/images/swift.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-17</div><div class="info-item-2">Functions as First-Class Citizens</div></div><div class="info-2"><div class="info-item-1">Functions as First-Class CitizensI. What Are “First-Class Citizens”?First-Class Citizens refer to entities (typically data types) in a programming language that can be used like variables.   They must satisfy three key characteristics:    Characteristic Meaning    Assignable Can be assigned to variables or constants   Passable as parameters Can be passed as arguments to other functions   Returnable Can be returned from other functions   In Swift, functions are first-class citizens!  II. Demon...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">VermeerByte</div><div class="author-info-description">It‘s more fun to be a pirate than to join the Navy. —— Steve Jobs</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Maimai10808"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A0-What-is-an-Escaping-Closure"><span class="toc-number">1.</span> <span class="toc-text">Ⅰ.What is an Escaping Closure?</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Definition"><span class="toc-number">1.1.</span> <span class="toc-text">Definition:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A1-Why-Do-We-Need-Escaping-Closures-Example-Networking"><span class="toc-number">2.</span> <span class="toc-text">Ⅱ. Why Do We Need Escaping Closures? (Example: Networking)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#When-you-call-fetchData"><span class="toc-number">2.0.1.</span> <span class="toc-text">When you call fetchData:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A2-What-Does-escaping-Do"><span class="toc-number">3.</span> <span class="toc-text">Ⅲ. What Does @escaping Do?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#By-default-Swift-closures-passed-as-parameters-are-non-escaping-meaning"><span class="toc-number">3.0.1.</span> <span class="toc-text">By default, Swift closures passed as parameters are non-escaping, meaning:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#But-for-asynchronous-operations-like-network-requests"><span class="toc-number">3.0.2.</span> <span class="toc-text">But for asynchronous operations, like network requests:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A3-Correct-Way-Using-an-Escaping-Closure"><span class="toc-number">4.</span> <span class="toc-text">Ⅳ.Correct Way Using an Escaping Closure</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-is-escaping-Required"><span class="toc-number">4.1.</span> <span class="toc-text">Why is @escaping Required?</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A4-Non-Escaping-Closures"><span class="toc-number">5.</span> <span class="toc-text">Ⅴ.Non-Escaping Closures</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Concept"><span class="toc-number">5.1.</span> <span class="toc-text">Concept:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Example-Using-a-Non-Escaping-Closure-to-Process-Local-Data"><span class="toc-number">5.2.</span> <span class="toc-text">Example: Using a Non-Escaping Closure to Process Local Data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Explanation"><span class="toc-number">5.3.</span> <span class="toc-text">Explanation:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A5-Escaping-Closure-VS-Non-Escaping-Closures"><span class="toc-number">6.</span> <span class="toc-text">Ⅵ.Escaping Closure VS Non-Escaping Closures</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Execution-Output"><span class="toc-number">6.1.</span> <span class="toc-text">Execution Output:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Execution-Output-1"><span class="toc-number">6.2.</span> <span class="toc-text">Execution Output:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A6-Limitations-of-Escaping-Closures"><span class="toc-number">7.</span> <span class="toc-text">Ⅶ.Limitations of Escaping Closures</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Risk-of-Retain-Cycles"><span class="toc-number">7.0.1.</span> <span class="toc-text">Risk of Retain Cycles</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Example"><span class="toc-number">7.0.2.</span> <span class="toc-text">Example:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Best-Practice"><span class="toc-number">7.0.3.</span> <span class="toc-text">Best Practice:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Safer-Example"><span class="toc-number">7.0.4.</span> <span class="toc-text">Safer Example:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A8-Summary"><span class="toc-number">8.</span> <span class="toc-text">Ⅸ.Summary</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A9-References"><span class="toc-number">9.</span> <span class="toc-text">Ⅹ.References</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/10/asdas/" title="asdas">asdas</a><time datetime="2025-08-09T16:00:00.000Z" title="发表于 2025-08-10 00:00:00">2025-08-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/10/asdasd/" title="asdasd">asdasd</a><time datetime="2025-08-09T16:00:00.000Z" title="发表于 2025-08-10 00:00:00">2025-08-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/10/asdasdddd/" title="asdasdddd">asdasdddd</a><time datetime="2025-08-09T16:00:00.000Z" title="发表于 2025-08-10 00:00:00">2025-08-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/10/%E5%93%88%E5%93%88/" title="哈哈">哈哈</a><time datetime="2025-08-09T16:00:00.000Z" title="发表于 2025-08-10 00:00:00">2025-08-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/10/%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C/" title="你好世界">你好世界</a><time datetime="2025-08-09T16:00:00.000Z" title="发表于 2025-08-10 00:00:00">2025-08-10</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/imagelogo2.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By VermeerByte</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>